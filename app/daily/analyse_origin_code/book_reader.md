# 阅读器解析

阅读器具有的功能

1. 目录的显示 (当前页，已加载，未加载)
2. 夜间模式
3. 亮度调试(自动、自己设置)
4. 字体大小
5. 阅读的背景颜色
6. 范围点击弹出菜单
7. 翻页的动画效果
8. 文本的显示效果(根据字的大小，行间距显示文本)
9. 文本的来源(网络加载，还是存储，还有网络加载问题，是保留数据还是不保留数据，网络阅读的架构问题)
10. StatusBar的变化
11. 底部battery和时间、百分比的显示

作者是如何实现的

主要类:

ReadActivity:主要实现了显示切换还有一系列的点击事件。设置功能(夜间模式，亮度、目录、
字体大小的设置，文本的来源，StatusBar的变化)

BaseReadView:主要实现了加载文本上次的位置、判断点击事件(左边上一页，右边下一页，中间
弹出菜单并且判断是否相应翻页事件)、绘制文本页面的接口。总结而言实现的功能是对于点击事件
的判断并回调、开放翻页效果动画的接口、阅读位置的跳转与存储。之后所有的动画效果都是继承了
这个类。

PageFactory:其实BaserReadView还有的作用就是作为PageFactory的代理。PageFactory是
绘制的具体实现，绘制的内容有背景、字体大小、每页显示的文字、电池、时间、获取小说的段落等功能。

SettingManager:保存与恢复用户的阅读状态(性别、夜间模式、上一次阅读的节点、屏幕亮度、是否使用音量键翻阅等)

ThemeManager:设置阅读的背景的。

基本的了解完成了，我们现在来找难点在哪里，如何一步步的实现。

个人想法:

1. 参考掌阅还有UC阅读


## 实现阶段

1. 首先需要有一个可以显示含有菜单的界面，并实现展示目录的功能+设置版面的外形。

在设置之前，我们遇到的一个问题在于数据存储的设计(目录是否是永久保存的，会在退出的时候删除)。现在需要思考架构上的问题。
就是文章目录的问题，到底如何存储。

   1. 由于本身架构和能力的限制，当阅读的时候加载目录，并且默认缓存5章。当退出时候提示加入书架，并且提示不加入不保存进度

   2. 当书籍加入收藏的时候需要保存阅读的进度，还有章节的目录。这个应该由哪一方存储。

首先制作整体布局的问题，我需要的功能。 (大致布局框架完成)

### 阶段一

具体实现:

1. 实现菜单栏的显示和消失。 (完成)
2. 实现Toolbar顶部栏的显示和消失
3. 实现侧滑栏显示目录。(思考开始阅读和收藏下的不同状态 收藏保存目录保存状态。未收藏加载目录和状态)

沉浸式导航栏:在制作之前需要弄明白的几个问题

1. 如何将头部设置成半透明
2. 在半透明状态下，如何将布局不伸到StatusBar上
3. 如何设置隐藏StatusBar和NavigationBar，并且点击不会恢复，只有显示菜单的时候才恢复
4. 重新设置界面的StatusBar的问题。(1. 不设置StatusBar 2. 设置StatusBar 3. )