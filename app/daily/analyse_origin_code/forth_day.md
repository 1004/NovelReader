# 第四天

首先做一个总结:基本上已经将初始界面的UI展示部分做完了(只是展示，不说功能)。现在就是深入某些功能的实现了。

## 分析社区版块的页面的制作

我们先看到社区版块分为五个版块，我们来看一下他们之间界面的区别。

1. 书评区相对于其他区域多了一个选择按钮(全部类型)
2. 不同页面的item显示的内容不一样。

其他的基本上就是一样的，所以说我们能不能够对这些界面进行复用呢？或者说那些地方可以复用呢

那么作者是怎么做的呢？我们这里先不谈，我们先来谈一谈我们到底需要做哪些东西，只有知道哪些东西需要做，并且每个页面需要哪些东西，才能知道如何进行复用。

那么哪些东西需要做呢？

根据我对Community区的每个页面进行了分析，得出以下需要做的东西

1. 不同的标题名字
2. 筛选类型的类别选择器
3. 可滑动刷新的RecyclerView
4. 显示不同内容的Adapter
5. 每个内容显示Presenter，每个Presenter的数据处理

其中哪些是可以复用的呢？我们不妨看一下作者是如何做的。

1. 作者创建了一个SelectionLayout的类型选择器。
2. 作者创建了一个BaseCommunityActivity这个通用的Activity。这个Activity中封装了SelectionLayout需要使用到的选择参数，之后只需要子Activity进行选择就可以了。
3. 之后其他Activity继承这个Activity。子Activity通过创建Fragment进行内容的显示。
4. 每个子Fragment继承BaseRVFragment，这个也是作者自己写的封装了。其作用是对于ReyclerView进行处理，加载的页面和加载完成的页面的处理。
5. 每个Fragment中就是一个RecyclerView和获取数据的Presenter。

从中我们可以看到，作者对选择器和RecyclerView的逻辑进行了复用。其中作者还让原创和书评区采用一个页面进行复用。

那么我的想法是什么:

1. 其中其实我们可以看到，每个Activity其实都是有很多相似的代码的，说明我们其实可以对Activity进行复用。
2. 根据Activity传入的参数建立不同的Fragment。这里的问题就是，如果对选择器进行封装
3. 当然我们可以存放进一个Fragment中，然后根据类型选择不同的Adapter,Presenter选择不同的Api。因为作者的Fragment内，其实充斥着一抹一样的代码，只是调用的方法变了而已，逻辑都是一样的。但是个人感觉上这个耦合度太高了也不好。无法做到开闭原则。

所以总结一下我的想法:

1. 对Activity进行复用，因为Activity改动的地方相对较少，还有逻辑比较少
2. 对Fragment不进行复用，可能带动的地方会多，不同的逻辑比较多。

对于这些复用注意的问题是什么?

对于Activity复用的核心问题是，选择器的参数到底是作为参数还是，作为模板更好。个人认为作为参数就可以了，那么这个选择器该如何定制参数就是一个问题了。作者是采用创建Constant然后再采用List的方式对每个类型模块来封装。我的想法是采用枚举封装，其实一个HashMap也能够解决。

我最终的想法是:可以对Activity进行复用，不需要对Fragment进行复用。

这种方法就必须使用到简单工厂方法了，缺点是不符合开闭原则，优点是简单。
作者使用的是模板方法，优点是符合开闭原则，缺点的麻烦。我决定采用简单工厂吧。