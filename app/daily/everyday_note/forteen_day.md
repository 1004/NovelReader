未完成的任务

3. 修改数据库的命名(local remote)，在项目中结合使用RxJava
4. 修改RefreshLayout,ScrollRefreshLayout

## 晚上任务(都没完成)

1. 分析LitePal,Realm,GreenDao的优缺点，总结为什么使用GreenDao
2. 总结选用数据库的时候关心的问题(代码操作的简便性，性能，ORM关系，事物操作，加密，数据库的升级)
3. RxJava的几个重点使用，GreenDao的使用。如何设计存储功能呢。(数据的本地缓存、网络缓存、内存缓存)
4. 如何编写日志类啦

##

1. 修改MVP框架。。。
2. 简化数据获取操作。

## 任务

1. MVP框架修改  (完成)
2. 完善saveInstance (完成)
3. 设置新的数据存储方式

## 问题

1. 框架的设计，对于范型的使用 - -，蒙蔽了。之后下来研究一下范型。

2. 设计数据缓存框架

### 数据缓存框架步骤

关于设计部分:
1. 那些地方需要数据库缓存，那些地方不需要数据缓存。
2. 哪些地方需要实时刷新，哪些地方需要实时刷新哪些地方不需要实时刷新。
所以说关于数据库的设计方面需要考虑，能否实时刷新，或者缓存失效的时间。还需要考虑一些情况下不应该进行数据缓存。

我们拿讨论组为例，讨论组是实时的，所以最好拿到最新的消息。所以不需要进行数据缓存，但是最后需要存储到数据库中。
在讨论组的详情页，需要有刷新的这么一个功能。保证接受到实时的消息。关于是否实时存储，个人感觉在这种情况下当退
出的时候再将Adapter中的数据存储到数据库中更好。


书籍页的实时要求就没有这么强烈，所以说当刷新或者加载的时候，都可以采取缓存的策略。所以说当缓存被清除的时候存储到
数据库中更好。

实时的设计就成为了大问题，还有数据库中删除数据的问题。


首先完成自动刷新时候的数据读取，网络加载的逻辑。 考虑是否网络加载完成之后就将数据加入到数据库中。
个人感觉直接加入太粗暴了，每次都需要调用数据库消耗时间。并且当前形式没有对数据库进行处理，当数据太多的时候怎么办。
如果不是网络加载完成直接将数据存储，那么应该怎么做。还有生命周期的情况下，对应的数据存储应该怎么做。

根据上面的问题，我们一个一个解决:

1. 数据读取问题，首先我们需要创建数据库类，并且该类支持RxJava，我们采用流式调用。(完成)
2. 首次加载时候首先获取数据库中的数据，之后再获取网络中的数据。如果网络加载失败，之后的Loading全部从数据中
获取，除非刷新成功。

## 遇到的问题

1. GreenDao 可以关联提取数据，但是无法关联存储数据，删除数据。
2. 有两种方法能够关联表，第一种方式是使用Convert,第二种方式是是用添加外键的方式。
我觉的使用第二种方式更好一点。。因为第一种方式本来就不是用来干这个，可能会出现不可预知的问题。

3. GreenDao关联性
可以自动获取关联数据。但是无法自动存储、自动删除关联数据。
在一定程度上会修改关联数据(修改的代码在Bean)
在修改之后需要注意的是，使用session.add()添加到缓存中。否则之后获取的时候获取的还是原先的数据

所以对于存储和删除的动作，需要自己写
